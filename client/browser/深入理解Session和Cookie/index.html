<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入理解Session和Cookie | 向暖的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/blog/favicon.png">
    <link rel="manifest" href="/blog/js/manifest.json">
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?edc4bcec71692608cb4081eadb57b100";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="向暖,向暖的博客">
    <meta rel="keywords" content="向暖,向暖的博客,前端博客,https://xiangnuans.github.io">
    <meta name="Author" content="向暖">
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta async="async" http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta async="async" name="google-site-verification" content="nH3yTcAhj2mMCsTogPEBH6GHVZL81dxy4df5I_SbbHI">
    <meta name="baidu-site-verification" content="code-C87tLEnqNR">
    
    <link rel="preload" href="/blog/assets/css/0.styles.10652d6e.css" as="style"><link rel="preload" href="/blog/assets/js/app.9868b9be.js" as="script"><link rel="preload" href="/blog/assets/js/2.486784b7.js" as="script"><link rel="preload" href="/blog/assets/js/1.dadfa192.js" as="script"><link rel="preload" href="/blog/assets/js/34.9dcc62dd.js" as="script"><link rel="preload" href="/blog/assets/js/20.8f5a6b6c.js" as="script"><link rel="prefetch" href="/blog/assets/js/100.bb6aa684.js"><link rel="prefetch" href="/blog/assets/js/101.50c93aa2.js"><link rel="prefetch" href="/blog/assets/js/102.6dd61cf9.js"><link rel="prefetch" href="/blog/assets/js/103.30c147eb.js"><link rel="prefetch" href="/blog/assets/js/104.6d54aa98.js"><link rel="prefetch" href="/blog/assets/js/105.43d981cd.js"><link rel="prefetch" href="/blog/assets/js/106.c6947410.js"><link rel="prefetch" href="/blog/assets/js/107.c1d31559.js"><link rel="prefetch" href="/blog/assets/js/108.56f5fa07.js"><link rel="prefetch" href="/blog/assets/js/109.4ea6cbb7.js"><link rel="prefetch" href="/blog/assets/js/11.32ef9013.js"><link rel="prefetch" href="/blog/assets/js/110.a56f7b5f.js"><link rel="prefetch" href="/blog/assets/js/111.8d9e74a4.js"><link rel="prefetch" href="/blog/assets/js/112.c026fac3.js"><link rel="prefetch" href="/blog/assets/js/113.ee2c09ee.js"><link rel="prefetch" href="/blog/assets/js/114.0d810abd.js"><link rel="prefetch" href="/blog/assets/js/115.cf10d5e4.js"><link rel="prefetch" href="/blog/assets/js/116.07d44f78.js"><link rel="prefetch" href="/blog/assets/js/117.b00fc455.js"><link rel="prefetch" href="/blog/assets/js/118.f0ae91d3.js"><link rel="prefetch" href="/blog/assets/js/119.fc4a695d.js"><link rel="prefetch" href="/blog/assets/js/12.0a179208.js"><link rel="prefetch" href="/blog/assets/js/120.625f1b88.js"><link rel="prefetch" href="/blog/assets/js/121.ab05485d.js"><link rel="prefetch" href="/blog/assets/js/122.c39b4431.js"><link rel="prefetch" href="/blog/assets/js/123.2593a74c.js"><link rel="prefetch" href="/blog/assets/js/124.4faad048.js"><link rel="prefetch" href="/blog/assets/js/125.4926fcd2.js"><link rel="prefetch" href="/blog/assets/js/126.a685bc0f.js"><link rel="prefetch" href="/blog/assets/js/127.63314976.js"><link rel="prefetch" href="/blog/assets/js/128.5b58afc6.js"><link rel="prefetch" href="/blog/assets/js/129.1f9dd7da.js"><link rel="prefetch" href="/blog/assets/js/13.e5b631ec.js"><link rel="prefetch" href="/blog/assets/js/130.1ea4e9da.js"><link rel="prefetch" href="/blog/assets/js/131.c71dfd90.js"><link rel="prefetch" href="/blog/assets/js/132.5c52eb2c.js"><link rel="prefetch" href="/blog/assets/js/133.d3170a5e.js"><link rel="prefetch" href="/blog/assets/js/134.a63c7799.js"><link rel="prefetch" href="/blog/assets/js/135.df28796b.js"><link rel="prefetch" href="/blog/assets/js/136.a9d7ccfd.js"><link rel="prefetch" href="/blog/assets/js/137.bbbf897e.js"><link rel="prefetch" href="/blog/assets/js/138.6ec01c8a.js"><link rel="prefetch" href="/blog/assets/js/139.6ae81ffd.js"><link rel="prefetch" href="/blog/assets/js/14.4676111d.js"><link rel="prefetch" href="/blog/assets/js/140.b6047fa4.js"><link rel="prefetch" href="/blog/assets/js/141.235373ca.js"><link rel="prefetch" href="/blog/assets/js/142.dac54449.js"><link rel="prefetch" href="/blog/assets/js/143.e4e40b1b.js"><link rel="prefetch" href="/blog/assets/js/144.191712af.js"><link rel="prefetch" href="/blog/assets/js/145.f2e8631f.js"><link rel="prefetch" href="/blog/assets/js/146.30a8c9ee.js"><link rel="prefetch" href="/blog/assets/js/147.613f4fc8.js"><link rel="prefetch" href="/blog/assets/js/148.f4570fdc.js"><link rel="prefetch" href="/blog/assets/js/149.9730dd9b.js"><link rel="prefetch" href="/blog/assets/js/15.4cc274ea.js"><link rel="prefetch" href="/blog/assets/js/150.5ab15c09.js"><link rel="prefetch" href="/blog/assets/js/151.53ced671.js"><link rel="prefetch" href="/blog/assets/js/152.f09f548e.js"><link rel="prefetch" href="/blog/assets/js/153.70bb47cd.js"><link rel="prefetch" href="/blog/assets/js/154.715e1e09.js"><link rel="prefetch" href="/blog/assets/js/155.998a855b.js"><link rel="prefetch" href="/blog/assets/js/156.aa3e7e34.js"><link rel="prefetch" href="/blog/assets/js/157.a9f3ab09.js"><link rel="prefetch" href="/blog/assets/js/158.0dfb5e10.js"><link rel="prefetch" href="/blog/assets/js/159.69bbafd6.js"><link rel="prefetch" href="/blog/assets/js/16.d81de1d0.js"><link rel="prefetch" href="/blog/assets/js/160.969ffbcd.js"><link rel="prefetch" href="/blog/assets/js/161.5c9daa9d.js"><link rel="prefetch" href="/blog/assets/js/162.5deca1e4.js"><link rel="prefetch" href="/blog/assets/js/163.a58f308a.js"><link rel="prefetch" href="/blog/assets/js/164.48af94a1.js"><link rel="prefetch" href="/blog/assets/js/165.774b2a75.js"><link rel="prefetch" href="/blog/assets/js/166.183a94ff.js"><link rel="prefetch" href="/blog/assets/js/167.95666eef.js"><link rel="prefetch" href="/blog/assets/js/168.10b9fb5b.js"><link rel="prefetch" href="/blog/assets/js/169.801b4365.js"><link rel="prefetch" href="/blog/assets/js/17.c973d8fc.js"><link rel="prefetch" href="/blog/assets/js/170.035de207.js"><link rel="prefetch" href="/blog/assets/js/171.769d5efb.js"><link rel="prefetch" href="/blog/assets/js/172.3e89bd18.js"><link rel="prefetch" href="/blog/assets/js/173.e6074b3c.js"><link rel="prefetch" href="/blog/assets/js/174.61ddd7b6.js"><link rel="prefetch" href="/blog/assets/js/175.160a5beb.js"><link rel="prefetch" href="/blog/assets/js/176.7510153d.js"><link rel="prefetch" href="/blog/assets/js/177.5180e00e.js"><link rel="prefetch" href="/blog/assets/js/178.b1151f2f.js"><link rel="prefetch" href="/blog/assets/js/179.914aace6.js"><link rel="prefetch" href="/blog/assets/js/18.acdff4c7.js"><link rel="prefetch" href="/blog/assets/js/180.90712dd0.js"><link rel="prefetch" href="/blog/assets/js/181.0d830126.js"><link rel="prefetch" href="/blog/assets/js/182.740ba005.js"><link rel="prefetch" href="/blog/assets/js/183.a4fce1d2.js"><link rel="prefetch" href="/blog/assets/js/184.4723e20a.js"><link rel="prefetch" href="/blog/assets/js/185.2392b78f.js"><link rel="prefetch" href="/blog/assets/js/186.aef5e113.js"><link rel="prefetch" href="/blog/assets/js/187.0fd36dff.js"><link rel="prefetch" href="/blog/assets/js/188.9c5f100a.js"><link rel="prefetch" href="/blog/assets/js/189.848b7e19.js"><link rel="prefetch" href="/blog/assets/js/19.f6c5bf28.js"><link rel="prefetch" href="/blog/assets/js/190.7b311f44.js"><link rel="prefetch" href="/blog/assets/js/191.63beb4eb.js"><link rel="prefetch" href="/blog/assets/js/192.b0115e13.js"><link rel="prefetch" href="/blog/assets/js/193.c1bc3edc.js"><link rel="prefetch" href="/blog/assets/js/194.74068587.js"><link rel="prefetch" href="/blog/assets/js/195.124cd185.js"><link rel="prefetch" href="/blog/assets/js/196.e4aabf94.js"><link rel="prefetch" href="/blog/assets/js/197.ac921600.js"><link rel="prefetch" href="/blog/assets/js/198.96cabe39.js"><link rel="prefetch" href="/blog/assets/js/199.82c2d13d.js"><link rel="prefetch" href="/blog/assets/js/200.477d6101.js"><link rel="prefetch" href="/blog/assets/js/201.6c0bf144.js"><link rel="prefetch" href="/blog/assets/js/202.6a71e4c6.js"><link rel="prefetch" href="/blog/assets/js/203.e5311525.js"><link rel="prefetch" href="/blog/assets/js/204.ffa37883.js"><link rel="prefetch" href="/blog/assets/js/205.3445e6ab.js"><link rel="prefetch" href="/blog/assets/js/206.f1f4c64a.js"><link rel="prefetch" href="/blog/assets/js/207.ee1f1464.js"><link rel="prefetch" href="/blog/assets/js/208.41231cd6.js"><link rel="prefetch" href="/blog/assets/js/209.f322c4e5.js"><link rel="prefetch" href="/blog/assets/js/21.9800f172.js"><link rel="prefetch" href="/blog/assets/js/210.19ceda10.js"><link rel="prefetch" href="/blog/assets/js/211.966fae5b.js"><link rel="prefetch" href="/blog/assets/js/212.13ecf7ff.js"><link rel="prefetch" href="/blog/assets/js/213.084f4df2.js"><link rel="prefetch" href="/blog/assets/js/214.1fd97804.js"><link rel="prefetch" href="/blog/assets/js/215.b80c541b.js"><link rel="prefetch" href="/blog/assets/js/216.1598a5ef.js"><link rel="prefetch" href="/blog/assets/js/217.f4b1e716.js"><link rel="prefetch" href="/blog/assets/js/218.eea8a0f1.js"><link rel="prefetch" href="/blog/assets/js/219.2ce42c06.js"><link rel="prefetch" href="/blog/assets/js/22.deea3d57.js"><link rel="prefetch" href="/blog/assets/js/220.acb152f7.js"><link rel="prefetch" href="/blog/assets/js/221.ab6168e0.js"><link rel="prefetch" href="/blog/assets/js/222.7d326afa.js"><link rel="prefetch" href="/blog/assets/js/223.7e36570e.js"><link rel="prefetch" href="/blog/assets/js/224.6213613d.js"><link rel="prefetch" href="/blog/assets/js/23.fc721efd.js"><link rel="prefetch" href="/blog/assets/js/24.dfdd0bbb.js"><link rel="prefetch" href="/blog/assets/js/25.a4629b89.js"><link rel="prefetch" href="/blog/assets/js/26.11e9fde4.js"><link rel="prefetch" href="/blog/assets/js/27.0f2aef79.js"><link rel="prefetch" href="/blog/assets/js/28.a0d9f063.js"><link rel="prefetch" href="/blog/assets/js/29.4b83dd64.js"><link rel="prefetch" href="/blog/assets/js/3.f1c47426.js"><link rel="prefetch" href="/blog/assets/js/30.743d8c91.js"><link rel="prefetch" href="/blog/assets/js/31.3dfe581a.js"><link rel="prefetch" href="/blog/assets/js/32.527b8fc4.js"><link rel="prefetch" href="/blog/assets/js/33.0ae07a72.js"><link rel="prefetch" href="/blog/assets/js/35.4a1c7144.js"><link rel="prefetch" href="/blog/assets/js/36.c61a9446.js"><link rel="prefetch" href="/blog/assets/js/37.772bd09a.js"><link rel="prefetch" href="/blog/assets/js/38.c6aa38b5.js"><link rel="prefetch" href="/blog/assets/js/39.a3b28c05.js"><link rel="prefetch" href="/blog/assets/js/4.34a89ffd.js"><link rel="prefetch" href="/blog/assets/js/40.c471e93a.js"><link rel="prefetch" href="/blog/assets/js/41.89d6f33a.js"><link rel="prefetch" href="/blog/assets/js/42.1c9c9aaf.js"><link rel="prefetch" href="/blog/assets/js/43.b10cc24f.js"><link rel="prefetch" href="/blog/assets/js/44.d454d6b1.js"><link rel="prefetch" href="/blog/assets/js/45.dbfa6b34.js"><link rel="prefetch" href="/blog/assets/js/46.c71aa54b.js"><link rel="prefetch" href="/blog/assets/js/47.e4df760f.js"><link rel="prefetch" href="/blog/assets/js/48.5683e2f6.js"><link rel="prefetch" href="/blog/assets/js/49.bcda37ee.js"><link rel="prefetch" href="/blog/assets/js/5.7d802759.js"><link rel="prefetch" href="/blog/assets/js/50.b97719ad.js"><link rel="prefetch" href="/blog/assets/js/51.10c008f3.js"><link rel="prefetch" href="/blog/assets/js/52.88d07dfe.js"><link rel="prefetch" href="/blog/assets/js/53.385c19e2.js"><link rel="prefetch" href="/blog/assets/js/54.ee800bdb.js"><link rel="prefetch" href="/blog/assets/js/55.7fe4fddd.js"><link rel="prefetch" href="/blog/assets/js/56.3afa1469.js"><link rel="prefetch" href="/blog/assets/js/57.42b05a40.js"><link rel="prefetch" href="/blog/assets/js/58.2ecaea5a.js"><link rel="prefetch" href="/blog/assets/js/59.f472a45d.js"><link rel="prefetch" href="/blog/assets/js/6.c360dccb.js"><link rel="prefetch" href="/blog/assets/js/60.f2143e9a.js"><link rel="prefetch" href="/blog/assets/js/61.7f619c7e.js"><link rel="prefetch" href="/blog/assets/js/62.51cbb0d3.js"><link rel="prefetch" href="/blog/assets/js/63.984315e7.js"><link rel="prefetch" href="/blog/assets/js/64.e182e33c.js"><link rel="prefetch" href="/blog/assets/js/65.997a431b.js"><link rel="prefetch" href="/blog/assets/js/66.806925c0.js"><link rel="prefetch" href="/blog/assets/js/67.b319a35d.js"><link rel="prefetch" href="/blog/assets/js/68.0747dae8.js"><link rel="prefetch" href="/blog/assets/js/69.3475d471.js"><link rel="prefetch" href="/blog/assets/js/7.72ec0971.js"><link rel="prefetch" href="/blog/assets/js/70.ce00a8a9.js"><link rel="prefetch" href="/blog/assets/js/71.e251f571.js"><link rel="prefetch" href="/blog/assets/js/72.decfcb23.js"><link rel="prefetch" href="/blog/assets/js/73.e9ee1615.js"><link rel="prefetch" href="/blog/assets/js/74.ae8f8653.js"><link rel="prefetch" href="/blog/assets/js/75.8eabe6d4.js"><link rel="prefetch" href="/blog/assets/js/76.5ee58348.js"><link rel="prefetch" href="/blog/assets/js/77.554227e8.js"><link rel="prefetch" href="/blog/assets/js/78.f51e788d.js"><link rel="prefetch" href="/blog/assets/js/79.7cbbab0d.js"><link rel="prefetch" href="/blog/assets/js/80.4bc27832.js"><link rel="prefetch" href="/blog/assets/js/81.8515eaff.js"><link rel="prefetch" href="/blog/assets/js/82.c630de1c.js"><link rel="prefetch" href="/blog/assets/js/83.ef0b3eb8.js"><link rel="prefetch" href="/blog/assets/js/84.0329b789.js"><link rel="prefetch" href="/blog/assets/js/85.33d4554f.js"><link rel="prefetch" href="/blog/assets/js/86.02c6fcdb.js"><link rel="prefetch" href="/blog/assets/js/87.bb64872e.js"><link rel="prefetch" href="/blog/assets/js/88.927cb392.js"><link rel="prefetch" href="/blog/assets/js/89.9117a98f.js"><link rel="prefetch" href="/blog/assets/js/90.eb8861c1.js"><link rel="prefetch" href="/blog/assets/js/91.1ccb5569.js"><link rel="prefetch" href="/blog/assets/js/92.a394fcea.js"><link rel="prefetch" href="/blog/assets/js/93.9ba408d9.js"><link rel="prefetch" href="/blog/assets/js/94.1416af16.js"><link rel="prefetch" href="/blog/assets/js/95.93b229b3.js"><link rel="prefetch" href="/blog/assets/js/96.b5001872.js"><link rel="prefetch" href="/blog/assets/js/97.71fb8ed1.js"><link rel="prefetch" href="/blog/assets/js/98.26152852.js"><link rel="prefetch" href="/blog/assets/js/99.82ebedae.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.33af9e14.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.ffaecc8b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.10652d6e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">向暖的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="全栈" class="dropdown-title"><span class="title">全栈</span> <span class="arrow down"></span></button> <button type="button" aria-label="全栈" class="mobile-dropdown-title"><span class="title">全栈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fullStack/next/" class="nav-link">
  next.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web3" class="dropdown-title"><span class="title">Web3</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web3" class="mobile-dropdown-title"><span class="title">Web3</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web3/" class="nav-link">
  入门
</a></li><li class="dropdown-item"><!----> <a href="/blog/web3/Ethereum/" class="nav-link">
  Ethereum
</a></li><li class="dropdown-item"><!----> <a href="/blog/web3/Ton/" class="nav-link">
  Ton
</a></li><li class="dropdown-item"><!----> <a href="/blog/web3/Solona/" class="nav-link">
  Solona
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="客户端" class="dropdown-title"><span class="title">客户端</span> <span class="arrow down"></span></button> <button type="button" aria-label="客户端" class="mobile-dropdown-title"><span class="title">客户端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/client/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/browser/" class="nav-link router-link-active">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/style/" class="nav-link">
  样式
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/reactNative/" class="nav-link">
  react native
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端" class="dropdown-title"><span class="title">服务端</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务端" class="mobile-dropdown-title"><span class="title">服务端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/service/nest/" class="nav-link">
  nest
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/egg/" class="nav-link">
  egg
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/orm/" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/node/" class="nav-link">
  实践笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/toolboxes/build/" class="nav-link">
  编译打包
</a></li><li class="dropdown-item"><!----> <a href="/blog/toolboxes/tools/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/toolboxes/design/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blog/toolboxes/graph/" class="nav-link">
  知识网络
</a></li></ul></div></div> <a href="https://github.com/xiangnuans/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="全栈" class="dropdown-title"><span class="title">全栈</span> <span class="arrow down"></span></button> <button type="button" aria-label="全栈" class="mobile-dropdown-title"><span class="title">全栈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fullStack/next/" class="nav-link">
  next.js
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web3" class="dropdown-title"><span class="title">Web3</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web3" class="mobile-dropdown-title"><span class="title">Web3</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web3/" class="nav-link">
  入门
</a></li><li class="dropdown-item"><!----> <a href="/blog/web3/Ethereum/" class="nav-link">
  Ethereum
</a></li><li class="dropdown-item"><!----> <a href="/blog/web3/Ton/" class="nav-link">
  Ton
</a></li><li class="dropdown-item"><!----> <a href="/blog/web3/Solona/" class="nav-link">
  Solona
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="客户端" class="dropdown-title"><span class="title">客户端</span> <span class="arrow down"></span></button> <button type="button" aria-label="客户端" class="mobile-dropdown-title"><span class="title">客户端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/client/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/browser/" class="nav-link router-link-active">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/style/" class="nav-link">
  样式
</a></li><li class="dropdown-item"><!----> <a href="/blog/client/reactNative/" class="nav-link">
  react native
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端" class="dropdown-title"><span class="title">服务端</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务端" class="mobile-dropdown-title"><span class="title">服务端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/service/nest/" class="nav-link">
  nest
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/egg/" class="nav-link">
  egg
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/koa/" class="nav-link">
  koa
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/mysql/" class="nav-link">
  mysql
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/orm/" class="nav-link">
  ORM
</a></li><li class="dropdown-item"><!----> <a href="/blog/service/node/" class="nav-link">
  实践笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/toolboxes/build/" class="nav-link">
  编译打包
</a></li><li class="dropdown-item"><!----> <a href="/blog/toolboxes/tools/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/toolboxes/design/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blog/toolboxes/graph/" class="nav-link">
  知识网络
</a></li></ul></div></div> <a href="https://github.com/xiangnuans/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Browser</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/client/browser/" aria-current="page" class="sidebar-link">快速导航</a></li><li><a href="/blog/client/browser/JavaScript%E5%A6%82%E4%BD%95%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E5%92%8CNode%E4%B8%AD%E5%B7%A5%E4%BD%9C/" class="sidebar-link">JavaScript如何在浏览器和Node中工作</a></li><li><a href="/blog/client/browser/Node%E4%B8%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB/" class="sidebar-link">Node与浏览器之间的区别</a></li><li><a href="/blog/client/browser/SEO%E5%B0%8F%E6%8A%80%E5%B7%A7/" class="sidebar-link">SEO小技巧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTTP协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/client/browser/HTTP%E5%88%87%E9%9D%A2%E6%B5%81%E7%A8%8B/" class="sidebar-link">HTTP切面流程</a></li><li><a href="/blog/client/browser/URL%E7%9A%84%E6%9C%80%E5%A4%A7%E9%95%BF%E5%BA%A6%E6%98%AF%E5%A4%9A%E5%B0%91/" class="sidebar-link">URL的最大长度是多少</a></li><li><a href="/blog/client/browser/%E4%B8%80%E4%B8%AATCP%E8%BF%9E%E6%8E%A5%E5%8F%AF%E4%BB%A5%E5%8F%91%E9%80%81%E5%A4%9A%E5%B0%91%E4%B8%AAHTTP%E8%AF%B7%E6%B1%82/" class="sidebar-link">一个TCP连接可以发送多少个HTTP请求</a></li><li><a href="/blog/client/browser/%E5%B8%B8%E8%A7%81HTTP%E8%AF%B7%E6%B1%82%E5%A4%B4%EF%BC%8C%E5%93%8D%E5%BA%94%E5%A4%B4%EF%BC%8C%E5%AE%9E%E4%BD%93/" class="sidebar-link">常见HTTP请求头，响应头，实体</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>跨域</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/client/browser/CORS%E8%B7%A8%E5%9F%9F%E8%AF%A6%E8%A7%A3/" class="sidebar-link">CORS跨域详解</a></li><li><a href="/blog/client/browser/%E8%B7%A8%E5%9F%9F%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" class="sidebar-link">跨域方式实现原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>缓存</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/" aria-current="page" class="active sidebar-link">深入理解Session和Cookie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#cookie简介" class="sidebar-link">Cookie简介</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#cookie机制" class="sidebar-link">Cookie机制</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#http的cookie机制" class="sidebar-link">HTTP的Cookie机制</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#set-cookie和cookie" class="sidebar-link">Set-Cookie和Cookie</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#cookie的不可跨域名行" class="sidebar-link">Cookie的不可跨域名行</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#session简介" class="sidebar-link">Session简介</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#session机制" class="sidebar-link">Session机制</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#session的生命周期" class="sidebar-link">Session的生命周期</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#session的有效期" class="sidebar-link">Session的有效期</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#实现会话跟踪的技术" class="sidebar-link">实现会话跟踪的技术</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#cookie和session的的区别" class="sidebar-link">Cookie和Session的的区别</a></li><li class="sidebar-sub-header"><a href="/blog/client/browser/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Session%E5%92%8CCookie/#总结" class="sidebar-link">总结：</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>最近在写Web服务，顺便梳理了一下Cookie和Session的知识</p> <h2 id="cookie简介"><a href="#cookie简介" class="header-anchor">#</a> Cookie简介</h2> <p>由于HTTP是一种无状态的协议，服务器单从网络连接上无从知道客户身份。 怎么办呢？就给客户端们颁发一个通行证吧，每人一个，无论谁访问都必须携带自己通行证。 这样服务器就能从通行证上确认客户身份了。这就是Cookie的工作原理。</p> <p>Cookie实际上是一小段的文本信息。 客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。 客户端浏览器会把Cookie保存起来。 当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。 服务器检查该Cookie，以此来辨认用户状态。 服务器还可以根据需要修改Cookie的内容。</p> <h2 id="cookie机制"><a href="#cookie机制" class="header-anchor">#</a> Cookie机制</h2> <p>Cookie技术是客户端的解决方案，Cookie就是由服务器发给客户端的特殊信息，而这些信息以文本文件的方式存放在客户端， 然后客户端每次向服务器发送请求的时候都会带上这些特殊的信息。</p> <p>具体过程如下：</p> <ol><li>用户使用浏览器访问一个支持Cookie的网站的时候，用户会提供包括用户名在内的个人信息并且提交至服务器；</li> <li>服务器在向客户端回传相应的超文本的同时也会发回这些个人信息，当然这些信息并不是存放在HTTP响应体 （Response Body)中的，而是存放于HTTP响应头(Response Header)</li> <li>客户端浏览器接收到来自服务器的响应之后，浏览器会将这些信息存放在一个统一的位置。 对于Windows操作系统而言，我们可以从： [系统盘]:\Documents and Settings[用户名]\Cookies目录中找到存储的Cookie；</li> <li>客户端再次向服务器发送请求的时候，都会把相应的Cookie再次发回至服务器。 而这次，Cookie信息则存放在HTTP请求头(equest Header)了。</li></ol> <h2 id="http的cookie机制"><a href="#http的cookie机制" class="header-anchor">#</a> HTTP的Cookie机制</h2> <p>Web应用程序是使用HTTP协议传输数据的。HTTP协议是无状态的协议。 一旦数据交换完毕，客户端与服务器端的连接就会关闭，再次交换数据需要建立新的连接。 这就意味着服务器无法从连接上跟踪会话。 举个例子，用户A购买了一件商品放入购物车内， 当再次购买商品时服务器已经无法判断该购买行为是属于用户A的会话还是用户B的会话了。 要跟踪该会话，必须引入一种机制。</p> <p>Cookie就是这样的一种机制。它可以弥补HTTP协议无状态的不足。 在Session出现之前，基本上所有的网站都采用Cookie来跟踪会话。</p> <h2 id="set-cookie和cookie"><a href="#set-cookie和cookie" class="header-anchor">#</a> Set-Cookie和Cookie</h2> <p>两个Http头部和Cookie有关 : Set-Cookie和Cookie</p> <p>当服务器返回给客户端一个Http响应信息时，其中如果包含Set-Cookie这个头部，说明：</p> <ol><li>指示客户端建立一个cookie</li> <li>在后续的Http请求中自动发送这个cookie到服务器端，直到这个cookie过期。</li> <li>如果cookie的生存时间是整个会话期间的话，那么浏览器会将 cookie 保存在内存中， 浏览器关闭时就会自动清除这个cookie。</li> <li>如果将 cookie 保存在客户端的硬盘中，浏览器关闭的话，该 cookie 也不会被清除， 下次打开浏览器访问对应网站时，这个cookie就会自动再次发送到服务器端。</li></ol> <p>一个cookie的设置以及发送过程分为以下四步：</p> <ul><li><p>客户端发送一个http请求到服务器端</p></li> <li><p>服务器端发送一个http响应到客户端，其中包含Set-Cookie头部</p></li> <li><p>客户端发送一个http请求到服务器端，其中包含Cookie头部</p></li> <li><p>服务器端发送一个http响应到客户端
<img alt="" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/Av1dvP97Xd0WWBhoQsXQYWDYul6p3ficxbIcXv8A6LwUcVrHhDiayhB4I51GnCeicnIgXibsEL87NbS68UKojMGd4w/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" loading="lazy" class="lazy"></p></li></ul> <p>在客户端的第二次请求中包含Cookie头部，提供给了服务器端可以用来唯一标识客户端身份的信息。 这时，服务器端也就可以判断客户端是否启用了cookie。 尽管，用户可能在和应用程序交互的过程中突然禁用cookie的使用， 但是，这个情况基本是不太可能发生的，所以可以不加以考虑，这在实践中也被证明是对的。</p> <h2 id="cookie的不可跨域名行"><a href="#cookie的不可跨域名行" class="header-anchor">#</a> Cookie的不可跨域名行</h2> <p>很多网站都会使用Cookie。例如，Google会向客户端颁发Cookie，Baidu也会向客户端颁发Cookie。 那浏览器访问Google会不会也携带上Baidu颁发的Cookie呢？或者Google能不能修改Baidu颁发的Cookie呢？</p> <p>答案是否定的。Cookie具有不可跨域名性。 根据Cookie规范，浏览器访问Google只会携带Google的Cookie，而不会携带Baidu的Cookie。 Google也只能操作Google的Cookie，而不能操作Baidu的Cookie。</p> <p>Cookie在客户端是由浏览器来管理的。 浏览器能够保证Google只会操作Google的Cookie而不会操作Baidu的Cookie，从而保证用户的隐私安全。 浏览器判断一个网站是否能操作另一个网站Cookie的依据是域名。 Google与Baidu的域名不一样，因此Google不能操作Baidu的Cookie。</p> <p>注意：
虽然网站images.google.com与网站google.com同属于Google， 但是域名不一样，二者同样不能互相操作彼此的Cookie。</p> <p>用户登录网站google.com之后会发现访问images.google.com时登录信息仍然有效，而普通的Cookie是做不到的。 这是因为Google做了特殊处理。</p> <h2 id="session简介"><a href="#session简介" class="header-anchor">#</a> Session简介</h2> <p>Session是一种记录客户状态的机制，不同于Cookie的是Cookie保存在客户端浏览器中，而Session保存在服务器上。 客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。 客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。</p> <p>如果说Cookie机制是通过检查客户身上的&quot;通行证&quot;来确定客户身份的话， 那么Session机制就是通过检查服务器上的&quot;客户明细表&quot;来确认客户身份。 Session相当于程序在服务器上建立的一份客户档案， 客户来访的时候只需要查询客户档案表就可以了。</p> <h2 id="session机制"><a href="#session机制" class="header-anchor">#</a> Session机制</h2> <p>一方面，我们可以把客户端浏览器与服务器之间一系列交互的动作称为一个 Session。 从这个语义出发，我们会提到Session持续的时间，会提到在Session过程中进行了什么操作等等。</p> <p>另一方面，Session指的是服务器端为客户端所开辟的存储空间，该空间保存的信息就是用于保持状态。 从这个语义出发，我们则会提到往Session中存放什么内容，如何根据键值从Session中获取匹配的内容等。</p> <p>要使用Session，当然是先要创建Session。那么Session在何时创建呢？
Session在服务器端程序运行的过程中创建的，不同语言实现的应用程序有不同创建Session的方法， 在Java中是通过调用HttpServletRequest的getSession方法(使用true作为参数)创建的。 创建Session的同时，服务器会为该Session生成唯一的session id， 这个session id在随后的请求中会被用来重新获得已经创建的Session
Session被创建之后，就可以调用Session相关的方法往Session中增加内容了， 而这些内容只会保存在服务器中，发到客户端的只有session id
当客户端再次发送请求的时候，会将这个session id带上， 服务器接受到请求之后就会依据session id找到相应的Session，从而再次使用Session。</p> <h2 id="session的生命周期"><a href="#session的生命周期" class="header-anchor">#</a> Session的生命周期</h2> <p>Session保存在服务器端。为了获得更高的存取速度，服务器一般把Session放在内存中。 每个用户都会有一个独立的Session。 如果Session内容过于复杂，当大量客户访问服务器时可能会导致内存溢出。 因此，Session里的信息应该尽量精简。</p> <p>Session在用户第一次访问服务器的时候自动创建。 需要注意只有访问JSP、Servlet等程序时才会创建Session， 只访问HTML、IMAGE等静态资源并不会创建Session。 如果尚未生成Session，也可以使用request.getSession(true)强制生成Session。</p> <p>Session生成后，只要用户继续访问，服务器就会更新Session的最后访问时间，并维护该Session。 用户每访问服务器一次，无论是否读写Session，服务器都认为该用户的Session&quot;活跃(active)&quot;了一次。</p> <h2 id="session的有效期"><a href="#session的有效期" class="header-anchor">#</a> Session的有效期</h2> <p>由于会有越来越多的用户访问服务器，因此Session也会越来越多。 为防止内存溢出，服务器会把长时间内没有活跃的Session从内存删除。 这个时间就是Session的超时时间。如果超过了超时时间没访问过服务器，Session就自动失效了。</p> <p>Session的超时时间为maxInactiveInterval属性， 可以通过对应的getMaxInactiveInterval()获取，通过setMaxInactiveInterval(longinterval)修改。</p> <p>Session的超时时间也可以在web.xml中修改。 另外，通过调用Session的invalidate()方法可以使Session失效。</p> <h2 id="实现会话跟踪的技术"><a href="#实现会话跟踪的技术" class="header-anchor">#</a> 实现会话跟踪的技术</h2> <h3 id="_1-cookie"><a href="#_1-cookie" class="header-anchor">#</a> 1. Cookie</h3> <p>向客户端发送Cookie</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Cookie c =new Cookie(&quot;name&quot;,&quot;value&quot;); //创建Cookie
c.setMaxAge(60*60*24); //设置最大时效，此处设置的最大时效为一天
response.addCookie(c); //把Cookie放入到HTTP响应中
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>从客户端读取Cookie：</p> <p>优点： 数据可以持久保存，不需要服务器资源，简单，基于文本的key-value
缺点：大小受到限制，用户可以警用Cookie功能，由于保存在本地，有一定的安全风险。</p> <h3 id="_2-url重写"><a href="#_2-url重写" class="header-anchor">#</a> 2. URL重写</h3> <p>在URL中添加用户会话的信息作为请求的参数，或者将唯一的会话ID添加到URL结尾一标识一个会话</p> <p>优点：在Cookie被禁用的时候依然可以使用
缺点：必须对网站的URL进行编码，所有页面必须动态生成，不能用预先记录下来的URL进行访问。</p> <h3 id="_3-隐藏的表单域"><a href="#_3-隐藏的表单域" class="header-anchor">#</a> 3. 隐藏的表单域</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;input type=&quot;hidden&quot; name =&quot;session&quot; value=&quot;...&quot;/&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>优点：Cookie被禁止时可以使用
缺点：所有页面必须是表单提交之后的结果</p> <h3 id="_4-session"><a href="#_4-session" class="header-anchor">#</a> 4. Session</h3> <p>当一个用户第一次访问某个网站时会自动创建HttpSession，每个用户可以访问它自己的HttpSession。</p> <p>可以通过HttpServletRequest对象的getSession方法获得HttpSession。通过HttpSession的setAttribute方法可以将一个值放在HttpSession中， 通过调用 HttpSession对象的getAttribute方法，同时传入属性名就可以获取保存在HttpSession中的对象。</p> <p>与上面三种方式不同的是，HttpSession放在服务器的内存中，因此不要将过大的对象放在里面。 即使目前的Servlet容器可以在内存将满时将 HttpSession 中的对象移到其他存储设备中，但是这样势必影响性能。 添加到 HttpSession 中的值可以是任意Java对象，这个对象最好实现了 Serializable接口， 这样Servlet容器在必要的时候可以将其序列化到文件中，否则在序列化时就会出现异常。</p> <h2 id="cookie和session的的区别"><a href="#cookie和session的的区别" class="header-anchor">#</a> Cookie和Session的的区别</h2> <ol><li>HTTP协议是无状态的协议，服务端需要记录用户的状态，就需要用某种机制来识别具体的用户，这个机制就是Session。 Session典型的应用场景就是购物车，当点击下单按钮时，由于HTTP协议无状态，所以并不知道是哪个用户操作的， 所以服务端要为特定的用户创建了特定的Session，用于标识这个用户，并且跟踪用户，这样才知道购物车里面的商品情况。 这个Session是保存在服务端的，有一个唯一标识。在服务端保存Session的方法很多，内存、数据库、文件都有。 集群的时候也要考虑Session的转移，在大型的网站，一般会有专门的Session服务器集群， 用来保存用户会话，这个时候 Session 信息都是放在内存的，此外，一些缓存服务比如Memcached之类的来放 Session。</li> <li>服务端使用Cookie来识别特定的客户。每次HTTP请求的时候，客户端都会发送相应的Cookie信息到服务端。 实际上大多数的应用都是用 Cookie 来实现Session跟踪的， 第一次创建Session的时候，服务端会在HTTP协议中告诉客户端，需要在 Cookie 里面记录一个session id， 以后每次请求把这个 session id发送到服务器，这样就可以使用对应的Seesion了。 如果客户端的浏览器禁用了 Cookie 怎么办？ 一般这种情况下，会使用一种叫做URL重写的技术来进行会话跟踪， 即每次HTTP交互，URL后面都会被附加上一个诸如 sid=xxxxx 这样的参数，服务端据此来识别用户。</li> <li>Cookie其实还可以用在一些方便用户的场景下， 设想你某次登陆过一个网站，下次登录的时候不想再次输入账号了，怎么办？ 这个信息可以写到Cookie里面，访问网站的时候， 网站页面的脚本可以读取这个信息，就自动帮你把用户名给填了， 能够方便一下用户。这也是Cookie名称的由来，给用户的一点甜头。</li></ol> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结：</h2> <ul><li>Session是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、文件中。</li> <li>Cookie是客户端保存用户信息的一种机制，用来记录用户的一些信息，也是实现Session的一种方式。</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xiangnuans/blog/edit/master/docs/client/browser/深入理解Session和Cookie.md" target="_blank" rel="noopener noreferrer">发现有错误?前往GitHub指正</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/19/2024, 1:33:36 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/blog/assets/js/app.9868b9be.js" defer></script><script src="/blog/assets/js/2.486784b7.js" defer></script><script src="/blog/assets/js/1.dadfa192.js" defer></script><script src="/blog/assets/js/34.9dcc62dd.js" defer></script><script src="/blog/assets/js/20.8f5a6b6c.js" defer></script>
  </body>
</html>
