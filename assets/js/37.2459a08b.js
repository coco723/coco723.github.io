(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{495:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("在 "),s("code",[t._v("Plasmo")]),t._v(" 中，"),s("code",[t._v("Background Service Worker")]),t._v("（简称 "),s("code",[t._v("Background SW")]),t._v("） 是 "),s("code",[t._v("Chrome")]),t._v(" 扩展中负责在后台持续运行的脚本。它允许扩展在浏览器窗口关闭或未聚焦时继续处理任务。")]),t._v(" "),s("h1",{attrs:{id:"plasmo-中的-background-sw-作用与用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plasmo-中的-background-sw-作用与用法"}},[t._v("#")]),t._v(" "),s("code",[t._v("Plasmo")]),t._v(" 中的 "),s("code",[t._v("Background SW")]),t._v(" 作用与用法：")]),t._v(" "),s("h2",{attrs:{id:"_1-事件监听"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-事件监听"}},[t._v("#")]),t._v(" 1. 事件监听")]),t._v(" "),s("p",[t._v("Background SW 可以处理特定事件，比如网络请求、浏览器活动等。常见用法是监听浏览器的生命周期事件、用户操作、或定时任务。")]),t._v(" "),s("h2",{attrs:{id:"_2-消息传递"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-消息传递"}},[t._v("#")]),t._v(" 2.\t消息传递")]),t._v(" "),s("p",[t._v("Plasmo 支持在 Background SW 和其他扩展部分（如 Popup 或 Content Script）之间发送消息。这样，后台服务就可以与用户界面部分交互，处理复杂的数据传递任务。")]),t._v(" "),s("h2",{attrs:{id:"_3-存储和数据管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-存储和数据管理"}},[t._v("#")]),t._v(" 3.\t存储和数据管理")]),t._v(" "),s("p",[t._v("它可以从扩展的各部分（如 Content Scripts）接收数据并存储在浏览器的本地存储中，提供跨页面、持久化的数据管理。")]),t._v(" "),s("h2",{attrs:{id:"_4-处理长期任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-处理长期任务"}},[t._v("#")]),t._v(" 4.\t处理长期任务")]),t._v(" "),s("p",[t._v("如通知提醒、定期检查数据更新、或在后台收集信息等。在某些应用场景中，比如检查消息状态或更新用户数据，后台脚本在没有用户操作的情况下运行，提供了灵活性和性能优化。")]),t._v(" "),s("p",[t._v("示例代码")]),t._v(" "),s("p",[t._v("以下是一个 Plasmo Background SW 的简单示例，用于监听消息并更新存储：")]),t._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// background.ts")]),t._v("\nchrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onInstalled"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Extension installed and Background SW running"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nchrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sendResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"updateData"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Data updated:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendResponse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" status"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h1",{attrs:{id:"plasmo-使用-background-sw-的注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plasmo-使用-background-sw-的注意事项"}},[t._v("#")]),t._v(" Plasmo 使用 Background SW 的注意事项")]),t._v(" "),s("ul",[s("li",[t._v("权限：确保在 manifest.json 文件中声明所需权限，如 background、storage。")]),t._v(" "),s("li",[t._v("生命周期管理：Background SW 仅在需要时运行，尽量使用事件驱动的方法，避免长期占用资源。")]),t._v(" "),s("li",[t._v("调试工具：可以使用 Chrome DevTools 中的 Service Workers 选项调试 Background SW。")])]),t._v(" "),s("p",[t._v("这种设计在消息提醒、通知推送、异步数据同步等功能中尤为有用，为用户提供无缝体验。")])])}),[],!1,null,null,null);s.default=e.exports}}]);