(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{576:function(s,t,a){"use strict";a.r(t);var n=a(2),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("在 SQL 查询中，"),t("code",[s._v("HAVING")]),s._v(" 和 "),t("code",[s._v("WHERE")]),s._v(" 都用于过滤数据，但它们的应用场景和作用对象不同。以下是两者的区别与联系：")]),s._v(" "),t("h3",{attrs:{id:"_1-作用范围"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-作用范围"}},[s._v("#")]),s._v(" 1. "),t("strong",[s._v("作用范围")])]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("WHERE")]),s._v(": 用于过滤"),t("strong",[s._v("原始数据")]),s._v("，在 SQL 语句中，"),t("code",[s._v("WHERE")]),s._v(" 子句在"),t("strong",[s._v("分组之前")]),s._v("就执行。它针对的是"),t("strong",[s._v("表中的行")]),s._v("，通常用来筛选满足条件的行。")]),s._v(" "),t("ul",[t("li",[s._v("例如："),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" employees\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),s._v("上述查询会先筛选出工资大于 5000 的员工，然后再进行接下来的操作。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("HAVING")]),s._v(": 用于过滤"),t("strong",[s._v("聚合结果")]),s._v("，它在"),t("strong",[s._v("分组之后")]),s._v("执行。通常用于和 "),t("code",[s._v("GROUP BY")]),s._v(" 一起，来筛选分组后的结果。"),t("code",[s._v("HAVING")]),s._v(" 针对的是"),t("strong",[s._v("聚合函数")]),s._v("的结果。")]),s._v(" "),t("ul",[t("li",[s._v("例如："),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" department"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" employees\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" department\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HAVING")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),s._v("上述查询会先按部门进行分组，然后对每个部门计算平均工资，最后筛选出平均工资大于 5000 的部门。")])])])]),s._v(" "),t("h3",{attrs:{id:"_2-执行顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-执行顺序"}},[s._v("#")]),s._v(" 2. "),t("strong",[s._v("执行顺序")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("WHERE")]),s._v(": 在 "),t("code",[s._v("GROUP BY")]),s._v(" 和 "),t("code",[s._v("HAVING")]),s._v(" 之前执行，首先对数据进行过滤。")]),s._v(" "),t("li",[t("strong",[s._v("HAVING")]),s._v(": 在 "),t("code",[s._v("GROUP BY")]),s._v(" 之后执行，通常用来对"),t("strong",[s._v("聚合后的结果")]),s._v("进行筛选。")])]),s._v(" "),t("h3",{attrs:{id:"_3-适用对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-适用对象"}},[s._v("#")]),s._v(" 3. "),t("strong",[s._v("适用对象")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("WHERE")]),s._v(": 用于过滤单个行的数据，不能用于聚合函数（如 "),t("code",[s._v("SUM()")]),s._v("、"),t("code",[s._v("COUNT()")]),s._v(" 等）。")]),s._v(" "),t("li",[t("strong",[s._v("HAVING")]),s._v(": 专门用于过滤基于聚合函数计算的结果，可以与聚合函数一起使用。")])]),s._v(" "),t("h3",{attrs:{id:"_4-典型使用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-典型使用场景"}},[s._v("#")]),s._v(" 4. "),t("strong",[s._v("典型使用场景")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("WHERE")]),s._v(": 用于在原始数据集中筛选符合条件的行。\n"),t("ul",[t("li",[s._v("例子：找出工资大于 5000 的员工。")])])]),s._v(" "),t("li",[t("strong",[s._v("HAVING")]),s._v(": 用于在分组之后，根据聚合函数的结果进一步过滤。\n"),t("ul",[t("li",[s._v("例子：找出平均工资大于 5000 的部门。")])])])]),s._v(" "),t("h3",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("p",[s._v("以下查询演示了 "),t("code",[s._v("WHERE")]),s._v(" 和 "),t("code",[s._v("HAVING")]),s._v(" 的区别：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" department"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" employees\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" department\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HAVING")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("WHERE salary > 3000")]),s._v(": 先筛选出工资大于 3000 的员工。")]),s._v(" "),t("li",[t("strong",[s._v("GROUP BY department")]),s._v(": 对筛选后的员工按部门分组。")]),s._v(" "),t("li",[t("strong",[s._v("HAVING AVG(salary) > 5000")]),s._v(": 最后过滤出平均工资大于 5000 的部门。")])]),s._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("WHERE")]),s._v(" 用于筛选原始数据，不能作用于聚合结果。")]),s._v(" "),t("li",[t("strong",[s._v("HAVING")]),s._v(" 用于过滤分组后的聚合结果，通常与 "),t("code",[s._v("GROUP BY")]),s._v(" 一起使用。")])])])}),[],!1,null,null,null);t.default=r.exports}}]);