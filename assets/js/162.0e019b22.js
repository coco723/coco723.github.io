(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{620:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("良好的Git commit规范优势：")]),s._v(" "),t("ul",[t("li",[s._v("加快Code Review的流程")]),s._v(" "),t("li",[s._v("根据Git Commit的元数据生成Changelog")]),s._v(" "),t("li",[s._v("后续维护者可以知道Feature被修改的原因")])]),s._v(" "),t("h2",{attrs:{id:"技术方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#技术方案"}},[s._v("#")]),s._v(" 技术方案")]),s._v(" "),t("p",[s._v("Git提交格式：")]),s._v(" "),t("ul",[t("li",[s._v("统一团队Git commit日志标准，便于后续代码review和版本发布")]),s._v(" "),t("li",[s._v("使用angular的Git commit日志作为基本规范\n"),t("ul",[t("li",[s._v("提交类型限制为：feature、fix、docs、style、refactor、pref、test、chore、revert等。")]),s._v(" "),t("li",[s._v("提交信息分为两部分，标题（首字母不大写，末尾不要标点）、主题内（正常描述信息即可）")])])]),s._v(" "),t("li",[s._v("日志提交时友好的类型选择提示\n"),t("ul",[t("li",[s._v("使用commitize工具")])])]),s._v(" "),t("li",[s._v("不符合要求格式的日志拒绝提交的保障机制\n"),t("ul",[t("li",[s._v("使用validate-commit-msg工具")]),s._v(" "),t("li",[s._v("需要同时在客户端、gitlab server hook做")])])]),s._v(" "),t("li",[s._v("统一changelog文档信息生成\n"),t("ul",[t("li",[s._v("使用conventional-changelog-cli工具")])])])]),s._v(" "),t("h2",{attrs:{id:"提交格式要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提交格式要求"}},[s._v("#")]),s._v(" 提交格式要求")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("(scope): "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("subject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("BLANK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("LINE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("BLANK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("LINE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("footer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("对格式的说明如下：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("type：代表某次提交的类型，比如修复一个bug还是增加一个新的feature，所有的type类型如下：")])]),s._v(" "),t("li",[t("p",[s._v("feat： 新增feature；")])]),s._v(" "),t("li",[t("p",[s._v("fix：修复bug")])]),s._v(" "),t("li",[t("p",[s._v("docs：仅仅修改了文档，比如README，CHANGELOG，CONTRIBURTE等等")])]),s._v(" "),t("li",[t("p",[s._v("style：仅仅修改了空格，格式缩进，逗号等等，不改变代码的逻辑")])]),s._v(" "),t("li",[t("p",[s._v("refactor：代码重构，没有价新功能或者修复bug")])]),s._v(" "),t("li",[t("p",[s._v("pref：优化相关，比如提升性能、体验")])]),s._v(" "),t("li",[t("p",[s._v("test：测试用例，包括单元测试、集成测试等等")])]),s._v(" "),t("li",[t("p",[s._v("chore： 改变构建流程、或者增加依赖库、工具等")])]),s._v(" "),t("li",[t("p",[s._v("revert：回滚到上一个版本")])])]),s._v(" "),t("h2",{attrs:{id:"本地开发阶段增加precommit钩子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地开发阶段增加precommit钩子"}},[s._v("#")]),s._v(" 本地开发阶段增加precommit钩子")]),s._v(" "),t("p",[s._v("安装husky")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" husky --save-dev\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("通过commitmsg钩子校验信息")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"script"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commitmsg"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"validate-commit-msg"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"changelog"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conventional-changelog -p angular -i CHANGELOG.md -s -r 0"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"validate-commit-msg"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.11.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"conventional-changelog"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.2.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"husky"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^0.13.1"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);