(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{550:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"使用travisci构建gitbook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用travisci构建gitbook"}},[s._v("#")]),s._v(" 使用TravisCI构建Gitbook")]),s._v(" "),t("h2",{attrs:{id:"为什么要使用travis-ci构建gitbook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么要使用travis-ci构建gitbook"}},[s._v("#")]),s._v(" 为什么要使用Travis CI构建Gitbook？")]),s._v(" "),t("p",[s._v("为你的项目接入Travis CI后，可以实现你的项目完全在线自动部署，无论你在任何地方，只要能够接入到互联网，访问到GitHub，就可以更新你的电子书，同时使其自动发不到GitHub上。")]),s._v(" "),t("p",[s._v("特别是你的电子书需要和一些非技术类同学协作时，借助Gitbook，他可以只通过浏览器对电子书进行修改，无需在自己的电脑上偶主Gitbook环境")]),s._v(" "),t("h2",{attrs:{id:"配置你步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置你步骤"}},[s._v("#")]),s._v(" 配置你步骤")]),s._v(" "),t("p",[s._v("创建.travis.yml文件")]),s._v(" "),t("p",[s._v("Travis的构建基于"),t("code",[s._v(".travis.yml")]),s._v("文件进行的，因此，为了让Travis CI能够正常构建，我们先来创建"),t("code",[s._v(".travis.yml")]),s._v("。")]),s._v(" "),t("p",[s._v("访问你的GitHub项目主页，点击其中的"),t("strong",[s._v("Create new File")])]),s._v(" "),t("p",[s._v("在弹出的界面中填入文件名 "),t("code",[s._v(".travis.yml")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("language")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" node_js\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node_js")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cache")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("directories")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" $HOME/.npm\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("before_install")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" export TZ='Asia/Shanghai'\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("install")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" npm install gitbook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cli "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("g\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" gitbook install\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" gitbook build . ./build\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("only")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" master\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("deploy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("provider")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pages\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("skip_cleanup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("github_token")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $GITHUB_TOKEN\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("local_dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" build\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" master\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("p",[s._v("添加完成后，选择**commit new file 即可。")]),s._v(" "),t("h2",{attrs:{id:"配置travis-ci"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置travis-ci"}},[s._v("#")]),s._v(" 配置Travis CI")]),s._v(" "),t("p",[s._v("如果你想要借助Travis CI来构建，除了创建配置文件以外，还需要使用你的GitHub账号登陆Travis CI，进行一些简单的配置")]),s._v(" "),t("p",[s._v("访问"),t("a",{attrs:{href:"https://travis-ci.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Travis CI"),t("OutboundLink")],1),s._v("官网，使用Github登陆")]),s._v(" "),t("p",[s._v("登陆后，点击右上角用户头像，在谭书的下拉窗口中选择"),t("strong",[s._v("Settings。")])]),s._v(" "),t("p",[s._v("在下方的"),t("code",[s._v("Repository")]),s._v("列表中找到你的项目")]),s._v(" "),t("p",[s._v("点击项目后的"),t("strong",[s._v("Settings")]),s._v("，进入到项目的界面")]),s._v(" "),t("p",[s._v("在项目界面中找到"),t("strong",[s._v("More Options")]),s._v("，选择其中的"),t("strong",[s._v("Settings")])]),s._v(" "),t("p",[s._v("进入到项目的设置界面。")]),s._v(" "),t("p",[s._v("在下方的"),t("strong",[s._v("Environment Variables")]),s._v("中添加一个新的名为"),t("code",[s._v("$GITHUB_TOKEN")]),s._v("的环境变量，将你自己的"),t("a",{attrs:{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"}},[s._v("Personal Access Token"),t("OutboundLink")],1),s._v("填入其中，用于后续的GitHub Pages自动上传")]),s._v(" "),t("p",[s._v("添加完成后，再次点击"),t("strong",[s._v("More Options")]),s._v("，选择其中的"),t("strong",[s._v("Trigger Build")]),s._v("。")]),s._v(" "),t("p",[s._v("在弹出的界面中直接点击按钮开始构建")]),s._v(" "),t("p",[s._v("随后，你就可以等待Travis CI 的自动构建了")]),s._v(" "),t("p",[s._v("稍等片刻，当你发现Travis CI的构建变成绿色后，就说明已经构建完成了")]),s._v(" "),t("p",[s._v("此时，回到Github，点击界面中的Branc，就可以看到所有的分支了")])])}),[],!1,null,null,null);t.default=e.exports}}]);