(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{550:function(s,e,a){"use strict";a.r(e);var n=a(2),t=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"使用kubectl连接远程k8s集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用kubectl连接远程k8s集群"}},[s._v("#")]),s._v(" 使用kubectl连接远程k8s集群")]),s._v(" "),e("h2",{attrs:{id:"什么是kubectl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是kubectl"}},[s._v("#")]),s._v(" 什么是kubectl")]),s._v(" "),e("ul",[e("li",[s._v("kubectl是kubernetes的客户顿啊程序")]),s._v(" "),e("li",[s._v("是用于运行kubernetes集群命令的管理工具")]),s._v(" "),e("li",[s._v("提供了大量子命令可以让用户和集群进行交互")]),s._v(" "),e("li",[s._v("不一定部署在master上，用户可以通过kubectl 连接到master上")])]),s._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),e("p",[s._v("macOS下直接使用homebrew 管理工具进行安装")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("brew install kubernetes-cli\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("确认是否安装成功：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubectl version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"基本语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本语法"}},[s._v("#")]),s._v(" 基本语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("kubectl [command] [TYPE] [NAME] [flags]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"配置kubectl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置kubectl"}},[s._v("#")]),s._v(" 配置kubectl")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 配置集群名称与服务地址\nkubectl config --kubeconfig=${HOME}/.kube/config set-cluster cluster-name --server=https://{IP} --inspecure-skip-tls-verify\n\n# 设置一个管理用户为admin，并设置访问凭证。此处使用用户名和密码的验证方式\nkubectl config  --kubeconfig=${HOME}/.kube/config set-credentials admin --username=username --password=pwd\n\n# 设置一个名为admin的配置，使用cluster-name集群与admin 用户的上下文\nkubectl config --kubeconfig=${HOME}/.kube/config set-context admin --cluster-cluster-name --namespace=test --user=admin\n\n# 启用admin为默认上下文\nkubectl config --kubeconfig=${HOME}/.kube/config use-context admin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h2",{attrs:{id:"预览配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预览配置"}},[s._v("#")]),s._v(" 预览配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ kubectl config view\napiVersion: v1\nclusters:\n- cluster:\n    insecure-skip-tls-verify: true\n    server: https://{IP}\n  name: cluster-name\ncontexts:\n- context:\n    cluster: cluster-name\n    namespace: test\n    user: admin\n  name: admin\ncurrent-context: admin\nkind: Config\npreferences: {}\nusers:\n- name: admin\n  user:\n    password: pwd\n    username: username\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("h2",{attrs:{id:"验证配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证配置"}},[s._v("#")]),s._v(" 验证配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ kubectl cluster-info\nKubernetes master is running at https://{IP}\nGLBCDefaultBackend is running at https://{IP}/api/v1/namespaces/kube-system/services/default-http-backend:http/proxy\nHeapster is running at https://{IP}/api/v1/namespaces/kube-system/services/heapster/proxy\nKubeDNS is running at https://{IP}/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\nkubernetes-dashboard is running at https://{IP}/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy\nMetrics-server is running at https://{IP}/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("查看集群节点：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ kubectl get node\nNAME                                          STATUS    ROLES     AGE       VERSION\ngke-ci-cluster-1-default-pool-a7b52541-075v   Ready     <none>    3d        v1.9.7-gke.5\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("若以上输出正常，证明连接成功")])])}),[],!1,null,null,null);e.default=t.exports}}]);